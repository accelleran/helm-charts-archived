global:
  # Kubernetes advertise IP, external address used by services
  kubeIp: "10.20.20.20"

kafka:
  enabled: true
  
  configurationOverrides:
    # AUTOGENERATED DONT EDIT
    "confluent.support.metrics.enable": false  # Disables confluent metric submission
    "auto.create.topics.enable": true

    ## IMPORTANT Please manually change here the 10.20.20.20 IP to be the same as the global.kubeIp value
    "advertised.listeners": |-
      EXTERNAL://10.20.20.20:$((31090 + ${KAFKA_BROKER_ID}))
  
    # AUTOGENERATED DONT EDIT
    "listener.security.protocol.map": |-
      PLAINTEXT:PLAINTEXT,EXTERNAL:PLAINTEXT


nkafka-4g:
  # AUTOGENERATED DONT EDIT
  kafkaUrl: "{{ .Release.Name }}-kafka.{{ .Release.Namespace }}:9092"

  # AUTOGENERATED DONT EDIT
  natsUrl: "nats-service.{{ .Release.Namespace }}:4222"

  configs:
    # The Topic on Kafka where NKafka will publish the data
    kafkaPublishTopic: "test2"
    # If set to false, will use the ueRicId. If set to true, will use the generic UE ID shown on teh dashboard. WARNING: if using generic UE ID, you will not have the ueRicId which is necessary for some dRAX commands.
    genericUeId: "false"
    # How vectors will be published to JSON Kafka messages. Default set to none.
    seqMapper: "none"
    # The log level can be commented out, or set to info or debug
    logLevel: info
    ueRicIdName: "ueRicId"
    ueDraxIdName: "ueDraxId"

acc-sys-dashboard:
  grafana:
    datasources:
      # AUTOGENERATED DONT EDIT
      prometheusUrl: http://{{ .Release.Name }}-prometheus-server.{{ .Release.Namespace }}:80

      # AUTOGENERATED DONT EDIT
      lokiUrl: http://{{ .Release.Name }}-loki.{{ .Release.Namespace }}:3100

  prometheus:
    server:
      # Retention policy on the Prometheus storage
      retention: 15d

loki-stack:
  fluent-bit:
    loki:
      # AUTOGENERATED DONT EDIT
      serviceName: "{{ .Release.Name }}-loki.{{ .Release.Namespace }}"  # Defaults to "${RELEASE}-loki" if not set
  loki:
    config:
      table_manager:
        # Retention polocy for logs in Loki
        retention_deletes_enabled: true
        # Must be a multiple of 168h
        retention_period: 672h

dash-front-back-end:
  service:
    # The internal port used by WebGUI, default is 5000
    port: 5000

    # The external nodePort used by the WebGUI, default is 31315
    nodePort: 31315

  config:
    # AUTOGENERATED DONT EDIT
    config_id: "production"

    # The namespace where the L3 pod will be running
    defaultServiceNamespace: "default"

    # The namespace where the ORAN-CLUSTERCONTROLLER will be running
    defaultOranNamespace: "default"

    # AUTOGENERATED DONT EDIT
    grafanaURL: "{{ .Values.global.kubeIp }}"

    # The external nodePort used by Grafana, default is 30300
    grafanaPort: "30300"

    # AUTOGENERATED DONT EDIT
    nodeApiURL: "{{ .Values.global.kubeIp }}"

    nodePort: "31315"
    kafkaUrl: "{{ .Values.global.kubeIp }}"
    kafkaPort: "31090"
    svcOrchestratorHost: "acc-service-orchestrator"
    svcOrchestratorPort: "80"
    svcMonitorHost: "acc-service-monitor"
    svcMonitorPort: "80"
    pcixAppPodName: "accelleran-drax-pci-010-pci-xapp-api"
    pcixAppPort: "80"
    ksqldbPodName: "{{ .Values.global.kubeIp }}"
    ksqldbPort: "30533"
    LteRadioControllerLabel: "4G-Radio-Controller"
    apiUrl: "{{ .Values.global.kubeIp }}"
    websocketPort: "31316"

acc-service-monitor:
  # Enable/disable installation of the Service Monitor
  enabled: true

  monitoredNamespaces: "{{ .Release.Namespace }}"

acc-service-orchestrator:
  # Enable/disable installation of the Service Orchestrator
  enabled: true

acc-state-db:
  # Enable/disable installation of the State DB
  enabled: true

  strategyType: Recreate

  xapp-redis:
    nameOverride: "acc-state-db-redis"
    # AUTOGENERATED DONT EDIT
    enabled: true

  xapp-api:
    nameOverride: "acc-state-db-api"
    # AUTOGENERATED DONT EDIT
    enabled: true
    redis:
      # AUTOGENERATED DONT EDIT
      url: "{{ .Release.Name }}-acc-state-db-redis.{{ .Release.Namespace }}"

  # AUTOGENERATED DONT EDIT
  initConfigs:
    kafkaService: "{{ .Release.Name }}-kafka.{{ .Release.Namespace }}:9092"

  xappFrameworkConfig:
    redisUrl: "{{ .Release.Name }}-acc-state-db-redis.{{ .Release.Namespace }}"
    redisPort: 6379
    # If you want to flush the existing config, and use the config on helm install, enable the following
    flushOnDeployment: false

  xappConfig:
    apiGatewayUrl: '{{ .Values.global.kubeIp }}'
    apiGatewayPort: 31315
    logLevel: 20  # CRITICAL=50, ERROR=40, WARNING=30, INFO=20, DEBUG=10, NOTSET=0
    stateDbUrl: '{{ .Values.global.kubeIp }}'
    stateDbPort: 32000
    kafkaStateTopic: 'Topic_State'
    kafkaBeaconTopic: 'test2'
    kafkaUrl: '{{ .Values.global.kubeIp }}'
    kafkaPort: 31090
    expire_timer: 5000000000
    periodicPublish: 'True'
    publishInterval: 2  # in seconds

influxdb:
  # Enable/disable installation of InfluxDB
  enabled: true

vector:
  # Enable/disable installation of Vector 
  enabled: true

  initConfigs:
    kafkaService: "{{ .Release.Name }}-kafka.{{ .Release.Namespace }}:9092"
    influxdbService: "{{ .Release.Name }}-influxdb-api.{{ .Release.Namespace }}:8086"

  config:
    kafka:
      hostname: "{{ .Values.global.kubeIp }}"
      port: 31090
    influx:
      hostname: "{{ .Values.global.kubeIp }}"
      port: 30303
